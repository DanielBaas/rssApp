function search_feed(){var a=document.getElementById("field").value;send_server(a)}function send_server(a){var b=new XMLHttpRequest;b.onreadystatechange=function(){4==this.readyState&&200==this.status&&generate_content(this.responseText)},b.open("GET","http://localhost/Rss/extraerBD.php?q="+a,!0),b.send()}function updateDB(){var b=new XMLHttpRequest;b.onreadystatechange=function(){4==this.readyState&&200==this.status&&(alert(this.responseText),showMessage("La base de datos se ha actualizado"))},b.open("GET","http://localhost/Rss/enviarBD.php",!0),b.send()}function generate_content(a){if("{}"!=a){var b=JSON.parse(a),c=document.getElementById("txtHint");c.innerHTML="";for(var d=b.noticias.length,e=0;e<d;e++){var f=b.noticias[e],g=create_card(f.titulo,f.descripcion,f.fecha,f.link);c.appendChild(g)}}else showMessage("no se han encontrado noticias")}function create_card(a,b,c,d){var e=createElement("div","card-margin"),f=createElement("div","card blue-grey darken-1"),g=createElement("div","card-content white-text"),h=createElement("span","card-title");h.innerHTML=a;var i=createElement("div","");i.innerHTML=b;var j=createElement("div","");j.innerHTML=c;var k=createElement("div","card-action"),l=createElement("a","");return l.href=d,l.target="_blank",l.innerHTML="ir a la noticia",g.appendChild(h),g.appendChild(i),g.appendChild(j),k.appendChild(l),f.appendChild(g),f.appendChild(k),e.appendChild(f),e}function createElement(a,b){var c=document.createElement(a);return c.className=b,c}function showMessage(a){var b=document.getElementById("txtHint");b.innerHTML="",b.innerHTML=a}document.getElementById("buscar").addEventListener("click",search_feed),document.getElementById("actualizar").addEventListener("click",updateDB);